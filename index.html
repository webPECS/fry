<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HomeFood</title>
    
	<link rel="stylesheet" href="themes/fry.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.structure-1.4.5.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    
<!--  <script type="text/javascript" src="phonegap.js"></script> -->
	<script src="scripts/jquery-1.11.1.min.js"></script>

  <script>
    $( document ).on( "mobileinit", function() {
      $.mobile.allowCrossDomainPages = true;
    });
  </script>    
    
	<script src="scripts/jquery.mobile-1.4.5.min.js"></script>
    

    
<script type="text/javascript">


    // alert dialog dismissed
    function alertDismissed() {
        intervalId = setInterval('beolvasas()',15*1000);
    }
	
	
    function showAlert() {
//        navigator.notification.beep(1);
//        navigator.notification.vibrate(1000);
    }


	
	function beolvasas() {
		var output = '';
		
		$.ajax({
		  url: 'http://www.webpecs.hu/fry_rendelesek.php',
		  type: 'GET',
		  data: { ids: ids, page: window.page },
		  dataType: 'jsonp',
		  jsonpCallback: 'jsonCallback',
		  success: function(data) {
			if (data.futar_id>0) {
			  output = '';
			  
			} else {
				output = '<p><strong>Hiba!</strong></p>';
				output += '<p>A felhasználónév vagy a jelszó nem megfelelő.</p>';
        output += '<p><a href="#one" data-role="button" data-icon="back" data-inline="true" onclick="Back()">Vissza</a></p>';
		  	$("#two .content").html(output).trigger('create');
			}
		  }
		});
	}


function RendelesTarolasa() {
	window.tomb.push([$("#darab").val(),$('input[name=kaja]:checked').val(),$('input[name=sos]:checked').val(),$('input[name=meret]:checked').val()]);
  var html_tmp = '';

  $("#rendeles").show();
  $("#rendeles ul").empty();
  $.each(window.tomb, function (index, value) {
    html_tmp = '<li>';
    $.each(value, function (i, v) { 
      switch (i) {
        case 0:
        html_tmp += v + ' db, '; 
        break;
        case 1:
        html_tmp += window.kaja[v] + ' ('; 
        break;
        case 2:
        html_tmp += window.sos[v] + ','; 
        break;
        case 3:
        html_tmp += window.meret[v] + ')';
        break;
      }
    });
    $("#rendeles ul").append(html_tmp + '</li>');
  });
  $("#rendeles ul").append('<li><a href="#">Elküldöm</a></li>');
  $("#rendeles ul").listview("refresh");

}
  

function Store(page) {
  window.page = page;
  window.localStorage.setItem("page", window.page);
  
//  beolvasas();
//  intervalId = setInterval('beolvasas()',10*1000);
}

function Back() {
  $("#two .content").html('');
  clearInterval(intervalId);
}

function showPlus() {
	$("#plusz").show();
}

	
</script>    
</head>

<body>

<!-- Start of first page: #one -->
<div data-role="page" id="one">

	<div data-role="header">
		<h1>Fry</h1>
	</div><!-- /header -->

	<div role="main" class="content">
    
    <p>Kérlek válassz funkciót:</p>
    
    <a href="#two" data-role="button" data-icon="action" onClick="Store('#two');">Rendelés leadása</a>

    <a href="#three" data-role="button" data-icon="bullets" onClick="Store('#three');">Beérkező rendelések</a>
    
	</div><!-- /content -->

</div><!-- /page one -->




<!-- Start of second page: #two -->
<div data-role="page" id="two">

	<div data-role="header">
		<h1>Fry</h1>
		<a href="#one" data-icon="home" class="ui-btn-left" data-iconpos="notext">vissza</a>
		<a onclick="RendelesTarolasa()" data-icon="plus" class="ui-btn-right" data-iconpos="notext" style="display:none;" id="plusz">plusz</a>
	</div><!-- /header -->

	<div role="main" class="content">

    <input name="darab" id="darab" min="1" max="10" value="1" type="range">
    <fieldset data-role="controlgroup" onClick="showPlus()" id="kaja"></fieldset>
    <fieldset data-role="controlgroup" data-type="horizontal" id="sos"></fieldset>
    <fieldset data-role="controlgroup" data-type="horizontal" id="meret"></fieldset>

    <div id="rendeles" data-role="collapsible" data-collapsed="false">
      <h4>Rendelés</h4>
      <ul data-role="listview">
      </ul>
    </div>
    
	</div><!-- /content -->

</div><!-- /page two -->


<script type="text/javascript">

//feltölti a fieldset-et radio és label tagekkel a tömböknek megfelelően
function fieldsetFill(name) {
  var html_tmp = '';
  $.each(window[name], function( index, value ) {
    $("#"+name).controlgroup("container").append('<input name="' + name + '" id="' + name + index + '" value="' + index + '" type="radio"><label for="' + name + index + '">' + value + '</label>')
  ;
  });
  $("#"+name).enhanceWithin().controlgroup("refresh");
}

$( document ).ready(function() {
  //felhasználónév és jelszó tárolása
  window.page = window.localStorage.getItem("page");
  $.mobile.changePage(window.page);
//  $("#page").val(window.page);
  
  window.tomb = new Array();

	window.sos = new Array('Sima','Sós');
  fieldsetFill('sos');
  
	window.meret = new Array('Kicsi','Nagy');
  fieldsetFill('meret');
  
	window.kaja = new Array('Krumpli','Fry & Fly','Funky','Frips');
  fieldsetFill('kaja');

//  window.plugin.backgroundMode.enable();
});

</script>
</body>
</html>
